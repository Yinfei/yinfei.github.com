<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>YinBlog</title>
    <description>Videogames • Web Development • Cats</description>
    <link>http://yinfei.github.io/</link>
    <atom:link href="http://yinfei.github.io/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Sun, 17 Apr 2016 11:31:59 +0200</pubDate>
    <lastBuildDate>Sun, 17 Apr 2016 11:31:59 +0200</lastBuildDate>
    <generator>Jekyll v3.1.2</generator>
    
      <item>
        <title>Rack and nothing else</title>
        <description>&lt;p&gt;The main objective of this blogpost will be to build a Ruby werbserver with Rack
as the only gem of our Gemfile and see how far we can go in our app complexity.&lt;/p&gt;
&lt;hr /&gt;

&lt;h2 id=&quot;the-setup&quot;&gt;The setup&lt;/h2&gt;
&lt;p&gt;&lt;br /&gt;
I strongly recommend having a Ruby Version manager installed, I personnaly use
&lt;a href=&quot;https://github.com/rbenv/rbenv&quot; target=&quot;_blank&quot;&gt;Rbenv&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;First of all, we’ll need at the root of our project a &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; file with those
few lines:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;https://rubygems.org&#39;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;rack&#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
Keep in mind that a &lt;code class=&quot;highlighter-rouge&quot;&gt;.ruby-version&lt;/code&gt; file would be really appreciated by your
Ruby version manager too, just type in there: &lt;code class=&quot;highlighter-rouge&quot;&gt;2.2.3&lt;/code&gt;, or any other Ruby
version of your choice.&lt;/p&gt;

&lt;p&gt;Now just run the &lt;code class=&quot;highlighter-rouge&quot;&gt;bundle install&lt;/code&gt; command in your terminal. Our project, at
this step, should look like this:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/my_project
 - .ruby_version
 - Gemfile
 - Gemfile.lock
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;hr /&gt;

&lt;h2 id=&quot;step-1-hello-world&quot;&gt;Step 1: Hello world!&lt;/h2&gt;
&lt;p&gt;&lt;br /&gt;
As &lt;a href=&quot;http://rack.github.io/&quot;&gt;Rack website&lt;/a&gt; explains, at the root of our project,
a &lt;code class=&quot;highlighter-rouge&quot;&gt;config.ru&lt;/code&gt; file like this:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;rack&#39;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;200&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;text/html&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;Hello world!&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
can run in a Rack server with a &lt;code class=&quot;highlighter-rouge&quot;&gt;bundle exec rackup config.ru&lt;/code&gt; command in your
terminal.  A quick check at &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost:9292&lt;/code&gt; (9292 being rack default port) in
your browser will show you this :&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/article_images/2016-03-01-rack-and-nothing-else/hello_world.png&quot; alt=&quot;It works!&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Now let’s see in details the content of the array our
&lt;a href=&quot;http://ruby-doc.org/core-2.2.3/Proc.html&quot; target=&quot;_blank&quot;&gt;Proc&lt;/a&gt; instance gave
to Rack:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;200&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;text/html&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;Hello world!&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
The first item is the HTTP code sent by our server, the second is the headers
sent by the server for the response and the last is the body of the response
itself: in this case plain text.&lt;/p&gt;

&lt;p&gt;The next step will be to read an &lt;code class=&quot;highlighter-rouge&quot;&gt;.erb&lt;/code&gt; file! Our project at this point:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/my_project
 - .ruby_version
 - config.ru
 - Gemfile
 - Gemfile.lock
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;hr /&gt;

&lt;h2 id=&quot;step-2-lets-read-some-erb-&quot;&gt;Step 2: Let’s read some .erb !&lt;/h2&gt;
&lt;p&gt;&lt;br /&gt;
While we’re working with ruby, it would be cool to load erb views. This way we
could use ruby code in it!&lt;/p&gt;

&lt;p&gt;Let’s add a &lt;code class=&quot;highlighter-rouge&quot;&gt;layout.erb&lt;/code&gt; view to our project in a &lt;code class=&quot;highlighter-rouge&quot;&gt;views&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;p&amp;gt;&lt;/span&gt;It&#39;s &lt;span class=&quot;cp&quot;&gt;&amp;lt;%=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;strftime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;%H:%M&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;!&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
Since we’re lucky, the &lt;code class=&quot;highlighter-rouge&quot;&gt;ERB&lt;/code&gt; class is
&lt;a href=&quot;http://ruby-doc.org/stdlib-2.2.3/libdoc/erb/rdoc/ERB.html&quot; target=&quot;_blank&quot;&gt;part of ruby Standard Lib&lt;/a&gt;,
so no need for another gem!&lt;/p&gt;

&lt;p&gt;Reading erb content isn’t that hard in fact. In ruby, reading a file can be written like this:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/views/index.erb&#39;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;file_content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expand_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
Render its erb content afterwards would just be something like this:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;ERB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
In this case &lt;code class=&quot;highlighter-rouge&quot;&gt;binding&lt;/code&gt; will be the result of the erb interpretation done by the &lt;code class=&quot;highlighter-rouge&quot;&gt;result&lt;/code&gt; method call.&lt;/p&gt;

&lt;p&gt;Now let’s extract the body response in its own method and implement all of this in our &lt;code class=&quot;highlighter-rouge&quot;&gt;config.ru&lt;/code&gt; :&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;rack&#39;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;erb&#39;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;read_erb_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;file_content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expand_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;erb_load&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ERB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;no&quot;&gt;Proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;200&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;text/html&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;erb_load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;body&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;read_erb_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/views/index.erb&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
A &lt;code class=&quot;highlighter-rouge&quot;&gt;bundle exec rackup config.ru&lt;/code&gt; command and a look at &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost:9292&lt;/code&gt; will show you this :&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/article_images/2016-03-01-rack-and-nothing-else/erb_loaded.png&quot; alt=&quot;We load ERB files!&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Our project at this point is getting bigger:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/my_project
  /views
    - index.erb
 - .ruby_version
 - config.ru
 - Gemfile
 - Gemfile.lock
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
The next step will be to create few more views and dynamically serve them!&lt;/p&gt;
&lt;hr /&gt;

&lt;h2 id=&quot;step-3-more-routes&quot;&gt;Step 3: More routes&lt;/h2&gt;
&lt;p&gt;&lt;br /&gt;
Let’s add more views to our project, I’ll just put the files name in their content at this moment
in a dedicated &lt;code class=&quot;highlighter-rouge&quot;&gt;posts&lt;/code&gt; folder:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/my_project
  /views
    - index.erb
  /posts
    - foo.erb
    - bar.erb
 - .ruby_version
 - config.ru
 - Gemfile
 - Gemfile.lock
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
First of all, if we’re to load multiple Procs, we’ll need the
&lt;a href=&quot;http://www.rubydoc.info/github/rack/rack/Rack/URLMap&quot; target=&quot;_blank&quot;&gt;Rack::URLMap&lt;/a&gt;
class. It would allow us to load a hash of routes linked to Procs. So, let’s update
our &lt;code class=&quot;highlighter-rouge&quot;&gt;config.ru&lt;/code&gt; file to load those additional views this way. The ugly way would
be to simply update the &lt;code class=&quot;highlighter-rouge&quot;&gt;body&lt;/code&gt; method to declare thoses routes like this :&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;routes&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/&#39;&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;read_erb_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/views/index.erb&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;&#39;/foo&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;read_erb_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/posts/foo.erb&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;&#39;/bar&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;read_erb_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/posts/bar.erb&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;URLMap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
Seeing this should scream at you that we should do it dynamically. Doing so would not neccessitate
to update the code to build its route after its addition to the project. Which would be a considerable
waste of time.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;ROOT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;ERB_FILES&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ROOT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/posts/**/*.erb&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;read_erb_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;file_content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expand_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;erb_load&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ERB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;no&quot;&gt;Proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;200&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;text/html&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;erb_load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;home&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;read_erb_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ROOT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/views/index.erb&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;relative_file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/posts\/(.*).erb/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;captures&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;routes&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;ERB_FILES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each_with_object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;home&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;merge!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;relative_file_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;read_erb_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;URLMap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
We added few constants in order to make it DRYish.
As you can see, the only specific case here is the homepage which is spearated in its own method.
The rest of the routes will be mapped to an url matching their path in the &lt;code class=&quot;highlighter-rouge&quot;&gt;posts&lt;/code&gt; folder, thanks to
the &lt;code class=&quot;highlighter-rouge&quot;&gt;relative_file_path&lt;/code&gt; method.&lt;/p&gt;

&lt;p&gt;This way, we have our homepage on &lt;code class=&quot;highlighter-rouge&quot;&gt;localhost:9292&lt;/code&gt;, and the two other views are accessible at &lt;code class=&quot;highlighter-rouge&quot;&gt;/foo&lt;/code&gt;
and &lt;code class=&quot;highlighter-rouge&quot;&gt;/bar&lt;/code&gt;! But you may wonder why I kept the homepage separated. The next step will make more sense
since we’re going to build a layout system!&lt;/p&gt;
&lt;hr /&gt;

&lt;h2 id=&quot;step-4-lets-create-a-layout-system&quot;&gt;Step 4: Let’s create a layout system!&lt;/h2&gt;
&lt;p&gt;&lt;br /&gt;
First things first, let’s add a &lt;code class=&quot;highlighter-rouge&quot;&gt;layout&lt;/code&gt; file in our views:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/my_project
  /views
    - layout.erb
    - index.erb
  /posts
    - foo.erb
    - bar.erb
 - .ruby_version
 - config.ru
 - Gemfile
 - Gemfile.lock
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
Now things are getting serious since, as you may have already found, a layout system would basically
rely on the fact that we’re going to insert the content of an erb file… in another erb file. It may
sound complicated but it can be summed up quite simply.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;LAYOUT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ROOT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/views/layout.erb&#39;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;erb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render_partial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;no&quot;&gt;ERB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;LAYOUT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;binding&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;render_partial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;OpenStruct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;content: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expand_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;no&quot;&gt;OpenStruct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;content: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ERB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;load_erb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;render&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;erb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;no&quot;&gt;Proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;200&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;text/html&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
For this case, we have to split the rendering logic. The &lt;code class=&quot;highlighter-rouge&quot;&gt;render_partial&lt;/code&gt; method has been updated, it will
be in charge of loading the post content file and its &lt;code class=&quot;highlighter-rouge&quot;&gt;.erb&lt;/code&gt; content. We eventually add a guard condition
in its first line in case of a user calling a post that does not exist, preventing a crash of the application.&lt;/p&gt;

&lt;p&gt;The &lt;code class=&quot;highlighter-rouge&quot;&gt;erb&lt;/code&gt; method is really interesting, it’ll handle the merge of the two ERBs.
First things first, as you can see in its last line, it’ll load the layout file. Then, in this content, we
embed an &lt;code class=&quot;highlighter-rouge&quot;&gt;instance_eval&lt;/code&gt; of the partial rendering and return the whole result as a &lt;code class=&quot;highlighter-rouge&quot;&gt;binding&lt;/code&gt;, same as before.
This time the &lt;code class=&quot;highlighter-rouge&quot;&gt;instance_eval&lt;/code&gt; contains an &lt;code class=&quot;highlighter-rouge&quot;&gt;OpenStruct&lt;/code&gt; with a key named &lt;code class=&quot;highlighter-rouge&quot;&gt;content&lt;/code&gt;, this key has the whole
partial content.&lt;/p&gt;

&lt;p&gt;A view of the &lt;code class=&quot;highlighter-rouge&quot;&gt;layout.erb&lt;/code&gt; file may make this clearer as how you’ll load this content in your layout:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&amp;lt;head&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;This is the layout.&lt;span class=&quot;nt&quot;&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;err&quot;&gt;&amp;lt;&lt;/span&gt;%= content %&amp;gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
As I’ve said before, even if it sounds complicated, keep in mind that it’s just embedding an &lt;code class=&quot;highlighter-rouge&quot;&gt;erb&lt;/code&gt; rendering
into another. You can now load any post file in your layout and add new posts on the fly with no sweat!&lt;/p&gt;

&lt;p&gt;The next step will be dedicated to strenghten our application by preventing unexpected behaviours.&lt;/p&gt;
&lt;hr /&gt;

&lt;h2 id=&quot;step-5-prevent-unexpected-behaviours-and-massive-cleanup&quot;&gt;Step 5: Prevent unexpected behaviours and massive cleanup!&lt;/h2&gt;
&lt;p&gt;&lt;br /&gt;
Our main issue is that all of our program routes are defined at its launch. Meaning that, with our actual code,
you can’t really redirect a user to a “404 not found” page if this user tries to load an unexisting post. At
this point, you’ll only load an empty layout unfortunately: the content of the partial loading being &lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Another issue is that if you check you app logs, you’ll see that your browser requests your favicon to display it
and it raises a 404 too.&lt;/p&gt;

&lt;p&gt;So, how can we make this routes system more dynamic and more intelligent? How can we send images files like a favicon?
First of all, let’s create a new view called &lt;code class=&quot;highlighter-rouge&quot;&gt;404.erb&lt;/code&gt; in our &lt;code class=&quot;highlighter-rouge&quot;&gt;views&lt;/code&gt; folder and a &lt;code class=&quot;highlighter-rouge&quot;&gt;favicon.ico&lt;/code&gt; file of your choice
at the root of the project.&lt;/p&gt;

&lt;p&gt;Since it’ll be a massive rework, let’s move our code to a proper &lt;code class=&quot;highlighter-rouge&quot;&gt;app.rb&lt;/code&gt; file and update the &lt;code class=&quot;highlighter-rouge&quot;&gt;config.ru&lt;/code&gt;. We’ll add
some namespacing too! (From now on, I’ll name my app &lt;code class=&quot;highlighter-rouge&quot;&gt;Garnet&lt;/code&gt;)&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/garnet
  /views
    - layout.erb
    - index.erb
    - 404.erb
  /posts
    - foo.erb
    - bar.erb
 - .ruby_version
 - app.rb
 - config.ru
 - favicon.ico
 - Gemfile
 - Gemfile.lock
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
The &lt;code class=&quot;highlighter-rouge&quot;&gt;app.rb&lt;/code&gt; has been reworked a lot:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;rack&#39;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;erb&#39;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;ostruct&#39;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Garnet&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Application&lt;/span&gt;

    &lt;span class=&quot;nc&quot;&gt;ROOT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expand_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;SYSTEM_FILES&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;layout&#39;&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ROOT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/views/layout.erb&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                       &lt;span class=&quot;s1&quot;&gt;&#39;favicon&#39;&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ROOT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/favicon.ico&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                       &lt;span class=&quot;s1&quot;&gt;&#39;homepage&#39;&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ROOT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/views/index.erb&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                       &lt;span class=&quot;s1&quot;&gt;&#39;not_found&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ROOT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/views/404.erb&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;HEADERS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;html&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;text/html&#39;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                  &lt;span class=&quot;s1&quot;&gt;&#39;favicon&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;Content-Type&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;image/x-icon&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                                 &lt;span class=&quot;s1&quot;&gt;&#39;Content-Length&#39;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SYSTEM_FILES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;favicon&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;bytesize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;erb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;build_partial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;layout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SYSTEM_FILES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;layout&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;

      &lt;span class=&quot;no&quot;&gt;ERB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;layout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;binding&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;build_partial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ERB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expand_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

      &lt;span class=&quot;no&quot;&gt;OpenStruct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;content: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;render_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ROOT&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/posts/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.erb&quot;&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;not_found&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exist?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

      &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;200&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;HEADERS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;html&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;erb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;favicon&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;200&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;HEADERS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;favicon&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SYSTEM_FILES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;favicon&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])]]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;homepage&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;200&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;HEADERS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;html&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;erb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SYSTEM_FILES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;homepage&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])]]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;not_found&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;404&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;HEADERS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;html&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;erb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SYSTEM_FILES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;not_found&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])]]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;endpoint_called&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;path&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;favicon&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endpoint_called&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/favicon.ico&#39;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;homepage&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endpoint_called&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/&#39;&lt;/span&gt;

      &lt;span class=&quot;n&quot;&gt;render_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endpoint_called&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
The real focus here is on the &lt;code class=&quot;highlighter-rouge&quot;&gt;call&lt;/code&gt; method, It’ll get each path request and act
as a proper router. There’s two guard conditions: the first is related to the favicon
that’ll be requested at each call. Doing so allow us to send it as fast as possble in
the whole app process. The second is related to the homepage that can’t match our
dynamic route building unfortunately.&lt;/p&gt;

&lt;p&gt;Since &lt;code class=&quot;highlighter-rouge&quot;&gt;call&lt;/code&gt; is in fact a method call by &lt;code class=&quot;highlighter-rouge&quot;&gt;Rack::Handler::WEBrick&lt;/code&gt; triggered automatically
which renders views for us, we’ll cheat a little an use its magic by simply implementing it.
This way we still rely only on &lt;code class=&quot;highlighter-rouge&quot;&gt;Rack&lt;/code&gt; while doing fancy things.&lt;/p&gt;

&lt;p&gt;The rest of the rework, as you can see, is just a cleanup in order to keep our project
as DRYish as possible.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;config.ru&lt;/code&gt; now calls a new instance of Garnet, as expected, binded on the port 3000 now
(which is a personal preference and not really neccessary).&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;./app&#39;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Garnet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Handler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;WEBrick&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Port&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;hr /&gt;

&lt;h2 id=&quot;last-step-add-some-css&quot;&gt;Last step: Add some CSS!&lt;/h2&gt;
&lt;p&gt;&lt;br /&gt;
One last thing: loading asset files! Since dealing with blank views is not quite appealing, let’s
add some style and update our code base to load asset files from a, &lt;code class=&quot;highlighter-rouge&quot;&gt;asset&lt;/code&gt; folder at the root of
our app.&lt;/p&gt;

&lt;p&gt;Just update &lt;code class=&quot;highlighter-rouge&quot;&gt;app.rb&lt;/code&gt; to match this, it’s as simple as it sounds:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;asset_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ROOT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;join&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;not_found&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exist?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;200&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;HEADERS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&#39;html&#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;endpoint_called&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rack&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;path&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;favicon&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endpoint_called&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/favicon.ico&#39;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;homepage&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endpoint_called&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&#39;/&#39;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asset_file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endpoint_called&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endpoint_called&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/\/assets/&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;render_view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endpoint_called&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br /&gt;
This way, any relative link to a stylesheet can work properly and return all the css you need!
&lt;br /&gt;&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;There you go! You can now have a little blog working with only one gem in your Gemfile, as promised!
I hope you found this as interesting as it was funny to do for me and if you want to contribute you
can find the source code on &lt;a href=&quot;https://github.com/Yinfei/garnet&quot; target=&quot;_blank&quot;&gt;GitHub&lt;/a&gt;.
Thank you for reading, I hope you learnt some things!&lt;/p&gt;
</description>
        <pubDate>Tue, 01 Mar 2016 22:38:44 +0100</pubDate>
        <link>http://yinfei.github.io/dev/2016/03/01/rack-and-nothing-else.html</link>
        <guid isPermaLink="true">http://yinfei.github.io/dev/2016/03/01/rack-and-nothing-else.html</guid>
        
        
        <category>dev</category>
        
      </item>
    
      <item>
        <title>[Master Class Camp] - Dernier jour</title>
        <description>&lt;h1 id=&quot;jour-4---dernier-jour&quot;&gt;Jour 4 - Dernier jour.&lt;/h1&gt;
&lt;p&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Après quelques impondérables, tels que l’impossibilité d’exploiter la première carte conçue par Kevin, nous voici enfin avec un jeu jouable et 2 niveaux !&lt;/p&gt;

&lt;p&gt;Intégrer les nouveaux décors de Kevin a notre code aura été une tâche complexe mais voir le tout fonctionner ensemble est une belle récompense.
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;http://i.imgur.com/umxgqIK.jpg&quot; style=&quot;max-width: 80%;&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;center&gt;&lt;font color=&quot;grey&quot;&gt;&lt;i&gt;It&#39;s alive !&lt;/i&gt;&lt;/font&gt;&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Il ne nous reste qu’a intégrer un écran de victoire correct et notre Proof of Concept sera présentable demain.&lt;/p&gt;

&lt;p&gt;Cette expérience fût très enrichissante et appréhender un device tel que le Leap Motion ne fût pas une mince affaire. L’expérience Unity3D à été très intéressante bien qu’un peu frustrante, on passe beaucoup de temps à configurer qu’a coder dans un projet tel que celui-ci hélas.&lt;/p&gt;
</description>
        <pubDate>Thu, 04 Jun 2015 15:38:56 +0200</pubDate>
        <link>http://yinfei.github.io/dev/2015/06/04/dernier-jour.html</link>
        <guid isPermaLink="true">http://yinfei.github.io/dev/2015/06/04/dernier-jour.html</guid>
        
        
        <category>dev</category>
        
      </item>
    
      <item>
        <title>[Master Class Camp] - Premiers résultats</title>
        <description>&lt;h1 id=&quot;jour-3---premiers-rsultats&quot;&gt;Jour 3 - Premiers résultats.&lt;/h1&gt;
&lt;p&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Nous parvenons enfin à incliner un plateau avec une boule dessus, ce qui influence le mouvement de cette dernière.
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;
&lt;center&gt;&lt;a href=&quot;http://imgur.com/QHXq9T7&quot;&gt;&lt;img src=&quot;http://i.imgur.com/QHXq9T7.gif&quot; title=&quot;source: imgur.com&quot; style=&quot;max-width: 80%;&quot; /&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p&gt;&lt;center&gt;&lt;font color=&quot;grey&quot;&gt;&lt;i&gt;En mouvement.&lt;/i&gt;&lt;/font&gt;&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Kévin de son côté à bien avancé sur le décor et commence à implémenter les pièges et obstacles.
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;
&lt;center&gt;&lt;img src=&quot;http://i.imgur.com/3tCyqbw.jpg&quot; style=&quot;max-width: 80%;&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;center&gt;&lt;font color=&quot;grey&quot;&gt;&lt;i&gt;Entre montagnes et palmiers.&lt;/i&gt;&lt;/font&gt;&lt;/center&gt;&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;La reconnaissance du Leap Motion reste encore récalcitrante mais nous avançons. Un fois que nous aurons mis en place un moyen stable et fiable nous pourrons l’intégrer au décor de Kévin.&lt;/p&gt;

&lt;p&gt;En conclusion, de petites avancées mais l’ensemble reste motivant et prometteur !&lt;/p&gt;
</description>
        <pubDate>Wed, 03 Jun 2015 15:56:44 +0200</pubDate>
        <link>http://yinfei.github.io/dev/2015/06/03/premiers-resultats.html</link>
        <guid isPermaLink="true">http://yinfei.github.io/dev/2015/06/03/premiers-resultats.html</guid>
        
        
        <category>dev</category>
        
      </item>
    
      <item>
        <title>[Master Class Camp] - Premiers essais et modélisation du décor</title>
        <description>&lt;h1 id=&quot;jour-2---premiers-essais-et-cration-du-dcor&quot;&gt;Jour 2 - Premiers essais et création du décor.&lt;/h1&gt;
&lt;p&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Ce jour 2 est marqué par nos premiers essais sur Unity3D et le C#. Pendant que Kévin appréhende la modélisation de l’aire de jeu nous continuons nos essais sur des projets existants pour comprendre comment parvenir à incliner une surface plane.
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
&lt;img src=&quot;http://i.imgur.com/zgWfE1h.jpg&quot; alt=&quot;Kévin prépare le décor.&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Une fois notre premier objectif atteint nous pourrons gérer la façon dont l’inclinaison va impacter la vitesse de rotation de la sphère.
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
&lt;img src=&quot;http://i.imgur.com/TD1DwWI.jpg&quot; alt=&quot;Vincent étudie des tutoriels vidéo.&quot; /&gt;&lt;/p&gt;

&lt;p&gt;La belle surprise du jour aura été le community manager de Leap Motion qui nous invite à le contacter par mail pour nos soucis de faiblesse de précision dans la reconnaissance du movement.
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
&lt;img src=&quot;http://i.imgur.com/u0EMuG4.png&quot; alt=&quot;Un CM réactif !&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Nous continuons donc nos essais, nous maitrisons un peu mieux le Leap Motion mais il y a encore fort a faire pour pavenir à un Proof of Concept présentable.
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
&lt;img src=&quot;http://i.imgur.com/aR6zTpU.jpg&quot; alt=&quot;&amp;quot;Et si je bouge comme ça ?&amp;quot;&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Tue, 02 Jun 2015 17:46:58 +0200</pubDate>
        <link>http://yinfei.github.io/dev/2015/06/02/premiers-essais.html</link>
        <guid isPermaLink="true">http://yinfei.github.io/dev/2015/06/02/premiers-essais.html</guid>
        
        
        <category>dev</category>
        
      </item>
    
      <item>
        <title>[Master Class Camp] - Première journée avec le Leap Motion</title>
        <description>&lt;h1 id=&quot;jour-1---premire-approche&quot;&gt;Jour 1 - Première approche.&lt;/h1&gt;
&lt;p&gt;&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Après un week-end de brainstorming et un passage au Co-Labs du 3è étage nous voici en possession du Saint Graal : &lt;b&gt;&lt;i&gt;un kit Leap Motion !&lt;/i&gt;&lt;/b&gt;
&lt;br /&gt;
Le choix de cette technologie s’est articulé autour d’une envie commune de prendre de la distance vis à vis du web le temps d’un projet. Après avoir travaillé sur le projet &lt;em&gt;Space Invaders&lt;/em&gt; nous voulions retenter l’aventure du développement d’une application ludique, même si la majorité d’entre nous ne se destine pas a travailler dans le domaine du jeu-vidéo nous souhaitions tout de même saisir cette opportunité.&lt;/p&gt;

&lt;p&gt;Nous avons donc décidé à l’unanimité de tester les différentes démos livrées avec le kit afin de commencer à creuser le concept de notre jeu.
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
&lt;img src=&quot;http://i.imgur.com/i7gWeIN.jpg?1&quot; alt=&quot;Premiers essais de bon matin&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Voici le kit installé et la première démo lancée.
Première remarque : la reconnaissance n’est pas très précise. Ne sachant pas si cela vient de la démo ou de l’appareil en lui-même nous essayons tous les mouvements possibles, du plus simple au plus complexe sur l’ensemble des applications disponibles.
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
&lt;img src=&quot;http://i.imgur.com/5eyoitu.jpg?1&quot; alt=&quot;Beckett teste la précision de la reconnaissance de mouvements.&quot; /&gt;
La seconde démo permet de mieux observer la reconnaissance des mouvements de la main et propose un quizz sur le corps humain. Les gestes semblent plus précis mais le format du jeu ne laisse que peu de place à l’improvisation, il ne s’agit que de désigner des points précis sur un organe, rien que vous ne pourriez faire sans une souris. Pour cet exemple, bien que le Leap Motion soit clairement dispensable, il permet un meilleur rendu et une meilleure reconnaissance que l’exemple précédent, ce qui est encourageant.
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
&lt;img src=&quot;http://i.imgur.com/Qm203RP.jpg?1&quot; alt=&quot;Kévin observe&quot; /&gt;
La dernière démo fût la plus complète. Possibilité de manipuler des objets soumis à une gravité, interaction avec des petits robots : le Leap Motion nous montre enfin son vrai potentiel et nous voici enthousiasmés.&lt;/p&gt;

&lt;p&gt;Une fois les troupes motivées nous voici en pleine table ronde pour faire le bilan de nos réflexions du week end. &lt;em&gt;Simulateur d’instrument de musique&lt;/em&gt;, &lt;em&gt;contrôleur d’interface pour Mac OSX&lt;/em&gt;… l’idée retenue sera finalement la première : &lt;strong&gt;un jeu-vidéo&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Beckett présentera les bases de notre projet : &lt;em&gt;guider un objet amovible d’un point A à un point B&lt;/em&gt;. L’idée me rappelle un jeu de société de mon enfance et me permettra de compléter en suggérant un système d’obstacles et d’outils pour les contourner (ressorts, trampolines…).
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
&lt;img src=&quot;http://www.joueclub.fr/images/produits/B/0602/06020022.jpg&quot; alt=&quot;&amp;quot;Tricky Bille&amp;quot; ou la vulgarisation de notre concept.&quot; /&gt;
Pour parvenir à nos fins nous choisissons le très célèbre &lt;strong&gt;Unity3D&lt;/strong&gt; qui devrait nous permettre de livrer un &lt;em&gt;“Proof of Concept”&lt;/em&gt; dans les délais grâce à ses librairies d’objets et sa gestion de la physique. Notre appréhension se porte maintenant sur la courbe d’apprentissage et son impact sur l’état de notre jeu le jour de la démo pour la soutenance. Nous restons cependant déterminés !
&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;
&lt;img src=&quot;http://i.imgur.com/CQJTS50.jpg&quot; alt=&quot;Premiers pas sur Unity3D, l&#39;aventure commence.&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 01 Jun 2015 17:46:58 +0200</pubDate>
        <link>http://yinfei.github.io/dev/2015/06/01/premiers-pas.html</link>
        <guid isPermaLink="true">http://yinfei.github.io/dev/2015/06/01/premiers-pas.html</guid>
        
        
        <category>dev</category>
        
      </item>
    
      <item>
        <title>From scratch to Ruby and Ruby on Rails</title>
        <description>&lt;p&gt;For my second year of programming with Ruby on Rails, I wanted to share with you my experience with this framework, from the first steps to where I am now.&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;heading-in-a-new-direction&quot;&gt;Heading in a new direction&lt;/h1&gt;
&lt;p&gt;&lt;br /&gt;
Two years ago, after five years spent in the communication and PR business, I started taking coding lessons form a school in france named AFPA. After all this time spent in the classical music media, I became aware of the fact that my career didn’t turn out the way I wanted it to, so I decided to set out towards a new world : &lt;strong&gt;programming&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;I used to think that this would be impossible, considering my lack of scientifically skills, but time proved me wrong.&lt;/p&gt;

&lt;p&gt;The main reason why I chose programming came from the fact that I have always loved creating things. Since I was a child, I always wanted to invent things and I thought that programming may be the best way for me to quench this thirst for creation.&lt;/p&gt;

&lt;p&gt;As you can see, I started with little to no skill : I knew HTML and CSS, nothing more. AFPA taught me the basics of programming, from C# scripts to advanced PHP projects, in witch I had to create a shop-like website for selling books from scratch.&lt;/p&gt;

&lt;p&gt;Those are good examples of what you can do to grab some programming skill, ask yourself what kind of tools you need or which things you’d like to copy and try to make it ! It’ll help you to understand how things works.
As for myself, hard work, research and guided exercices helped me through this long trial and error process, destined to understand and better my knowledge about the best practices, and pushing my results above those of my classmates. The basis of this motivation was not founded on a misplaced pride, but on the feeling that I was headed in the right direction this time.&lt;/p&gt;

&lt;p&gt;Going from writing a fed algorithms on paper to elaborating those projects is what got me seriously motivated to push further and start my own projects, even if i didn’t know where to start or which tools best suited them. I recommend you to benchmark the tools you might use : languages, development environments… because the most suited for you they are, the more productive you’ll be.&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;the-bootstrap-sorcery&quot;&gt;The Bootstrap sorcery&lt;/h1&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;center&gt;&lt;img alt=&quot;&quot; src=&quot;https://s3.amazonaws.com/f.cl.ly/items/0E3y0P3W3t2I401v2f2J/bootstrap.png&quot; style=&quot;height:210px&quot; /&gt;&lt;/center&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;Have you heard of this &#39;Bootstrap&#39; thing ? It looks awesome !&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;That’s the newbie I was, one year ago, approaching strange things called “frameworks”.&lt;/p&gt;

&lt;p&gt;Even if frameworks look georgeous &lt;small class=&quot;text-grey&quot;&gt;&lt;em&gt;(most of the time)&lt;/em&gt;&lt;/small&gt;, you should take your time and try to do things by yourself. Because those things bring this magic to you, they do all the complicated stuff in the background while you get the benfits from it. The main issue is that you miss how things really work and you get to the next step of developement complexity completely unprepared. Of course you don’t have to reinvent the wheel every time you need a car, but try to do it at least one time so that you have the big picture of what’s going on.&lt;/p&gt;

&lt;p&gt;So there I was, with a handful of small projects made out of procedural PHP in my bag, no knowledge of how to structure my work and not a single idea of how a framework works. First I learnt the &lt;a href=&quot;http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller&quot; target=&quot;_blank&quot;&gt;Model View Controller&lt;/a&gt; pattern, which you should keep a close eye on. Most of the web based framworks use this way to do stuff and it’s pretty cool.&lt;/p&gt;

&lt;center&gt;&lt;img alt=&quot;&quot; src=&quot;https://s3.amazonaws.com/f.cl.ly/items/0L0t3y023n3h1h1x0D19/symfony.png&quot; style=&quot;height:210px&quot; /&gt;&lt;/center&gt;

&lt;p&gt;Only knowing PHP and C#, my first two targets at the time were Symphony2 and Laravel. Both seemed good PHP MVC frameworks, but two years ago, being brand new at the time, Laravel lacked a reasonable sized community. Chances were that if I encountered issues I’d be all on my own to find answers to fix them. And since I was a complete rookie, it would have been a too risky choice.&lt;/p&gt;

&lt;p&gt;After a few tries, I successfully installed a Symphony2 version on my school computer and for the first time I started to see the way you’re supposed to do things when you &lt;em&gt;truely&lt;/em&gt; code. No more “new_file.php” this time, I used my terminal to do things and I must admit : I was completely lost.&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;rage-against-the-terminal&quot;&gt;Rage Against the Terminal&lt;/h1&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;“Terminal ? But I wanna do web projects ! That doesn’t make any sense at all !”&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Yup. Again, as I said, I &lt;em&gt;really&lt;/em&gt; started from scratch ! Seeing my black and white terminal again felt like a failure. I wanted neat designs and cool animations this “javascript” thing had shown me, not this prehistoric-looking thing again ! I already had enough of it with the C# scripting !&lt;/p&gt;

&lt;p&gt;I was far from understanding that this thing was going to be one of my best friends for the job. Symphony2 had shown me a glimpse of the mechanics, but Ruby on Rails really made me understand that even the coolest tools sometimes require good ol’ stuff like this terminal. And even if the results shows on a web browser, the real magic is hidden behind, somewhere else.&lt;/p&gt;

&lt;p&gt;About how my choice for Ruby and Ruby on Rails was made, the main issue that I had with PHP at the time &lt;small class=&quot;text-grey&quot;&gt;&lt;em&gt;(aside from the horrific amount of dollar signs)&lt;/em&gt;&lt;/small&gt; is that I already knew that “every web developer knew how to use PHP”. So I took the bet of “doing something else”, not to be the coolest kid in town, but to have an additional chance to stand out. Even if there’s a lack of developers in our society right now, I felt like I had to do something to have one more chance than the others. I wanted to do something more than being “one more Symfony2 developer”.&lt;/p&gt;

&lt;p&gt;I had two choices at the time : Ruby and Python. Both looked really cool, had very nice tools, huge communities and were web oriented. Since most of my developer friends are currently rubyists &lt;small class=&quot;text-grey&quot;&gt;&lt;em&gt;(and since the very strict look of Python syntax frightened me the first time I saw it)&lt;/em&gt;&lt;/small&gt; I chose Ruby.&lt;/p&gt;

&lt;p&gt;&lt;span style=&quot;color:#CF000F&quot;&gt;Red&lt;/span&gt; was my color, it looked clean, elegant and everything about it was saying to me : &lt;em&gt;Look kid, this is how it’s done&lt;/em&gt;. I knew it was the language for me, and I’m not ashamed to admit that it really was love at first sight.&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;no-pain-no-gain&quot;&gt;No pain, no gain&lt;/h1&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;center&gt;&lt;img alt=&quot;&quot; src=&quot;https://s3.amazonaws.com/f.cl.ly/items/061g2t10380n292v3300/ror_logo.png&quot; style=&quot;height:210px&quot; /&gt;&lt;/center&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;“So how does it work ? Let’s install Ruby on Rails and figure it out !”&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Let me be crystal clear about it : &lt;strong&gt;DON’T START LEARNING RUBY THE WAY I DID.&lt;/strong&gt;
If I wasn’t as motivated as the way I was at this time, there would have been absolutely no chance for me to succeed. I litterally began my journey at the end.
If you master the basics in programing and have a very good undestanding of OOP, learning Ruby is not actually that complicated, even though the coolest tricks may require attention. You just have to keep in mind that ruby is object oriented and that every function has now become a method. Just to try to create a few scripts then try to create a gem, have a reasonable start !
But the way I started to learn Ruby was probably the worst : inside Ruby on Rails. Yup, I learnt the two at the same time.
It was an awful idea. Not knowing the full extent of Ruby and all the subtle tricks, I often mistook Rails’ methods and Ruby’s. Since a framework is supposed to extend the potential of a given language by bringing additionnal tools, you’re better off knowing who does what or you’ll be confused all the time.
So take your time, learn Ruby slowly but surely, then try &lt;a href=&quot;http://www.sinatrarb.com/&quot; target=&quot;_blank&quot;&gt;Sinatra&lt;/a&gt;, a light Ruby framework, and build lightweight app. And when you’ll limited by what what you can do with it, take the big step towards Ruby on Rails !
I insist a lot on the “Take you time” gimmick because, in my case, I may have rushed too much. Try to build you skill one brick at a time, learn small thing and then big things or you’ll may be overrun by the missing pieces of the puzzle.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;“Migrate a database ? Scaffolding ? What ?”&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;My &lt;em&gt;big jump&lt;/em&gt; felt like being dropped in a jungle, naked, with only a spoon at my disposal.
French programming schools never confront you this kind of stuff, they try to convince you that the “web” is PHP websites made with Wordpress or Drupal, which is truely a shame. Because you can’t be completely open-minded if you restrain yourself to only doing websites. Being a web developer represents much more than just that. The more you let yourself be sucked in by this logic, the harder it gets to face the challenges of learning a framework. Because yes, doing your “index.php” website was fun but you only caught a glimpse of the very tip of the iceberg.
In my case, the amazing Rails community and awesome tutorials &lt;small class=&quot;text-grey&quot;&gt;&lt;em&gt;(like &lt;a href=&quot;http://guides.rubyonrails.org/getting_started.html&quot; target=&quot;_blank&quot;&gt;this one&lt;/a&gt;)&lt;/em&gt;&lt;/small&gt; helped me to get myself started. It covers the most basic stuff &lt;small class=&quot;text-grey&quot;&gt;&lt;em&gt;(creating a blog or managing simple resources with CRUD options)&amp;lt;/small&amp;gt;&lt;/em&gt; and really helps to grasp the basics.&lt;/small&gt;&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;create-things-share-things&quot;&gt;Create things, share things.&lt;/h1&gt;
&lt;p&gt;&lt;br /&gt;&lt;/p&gt;
&lt;center&gt;&lt;img alt=&quot;&quot; src=&quot;https://tctechcrunch2011.files.wordpress.com/2010/07/github-logo.png&quot; style=&quot;height:210px&quot; /&gt;&lt;/center&gt;

&lt;p&gt;After that I created &lt;a href=&quot;http://sparkbook.herokuapp.com&quot; target=&quot;_blank&quot;&gt;Sparkbook&lt;/a&gt; . A book collection assistant that helped me to grasp the concepts of relation between classes. Since the “has many through” relation bugged me for a long time, this was a great opportunity to finally understand how to make SQL calls through objects that were related that way.
I also developed a minimalist blog with Sinatra and ActiveRecord called &lt;a href=&quot;http://github.com/yinfei/spinel&quot;&gt;“Spinel”&lt;/a&gt;, you can fork it or clone it to add your needs.
Two years after I started to learn programing, I’m finally able to create things that I can share to people. I try to solve problems while I’m having fun and I hope you’ll feel that thrill too. I’ve never been this excited to wake up in the morning to go to my job.
Thanks to Spinel I’ve been able to share this story with you and I hope you liked it. Don’t hesitate to give programmation a shot if you’re curious, computers are less scary than what you think !
And once again : take it easy, go one step at a time.&lt;/p&gt;
</description>
        <pubDate>Sun, 30 Nov 2014 15:34:25 +0100</pubDate>
        <link>http://yinfei.github.io/dev/2014/11/30/from_scratch_to_ruby_and_ruby_on_rails.html</link>
        <guid isPermaLink="true">http://yinfei.github.io/dev/2014/11/30/from_scratch_to_ruby_and_ruby_on_rails.html</guid>
        
        
        <category>dev</category>
        
      </item>
    
  </channel>
</rss>
